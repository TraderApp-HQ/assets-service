// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Coin {
  id              Int            @id @default(autoincrement())
  coin            String         @db.VarChar(255)
  code            String         @db.VarChar(10)
  imgUrl          String         @db.VarChar(255)
  description     String         @db.Text
  isTradingActive Boolean
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  currency        Currency?
  exchagePairs    ExchangePair[]
}

model Currency {
  coinId        Int            @id
  isActive      Boolean
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  coin          Coin           @relation(fields: [coinId], references: [id])
  exchangePairs ExchangePair[]
}

model Exchange {
  id              Int            @id
  name            String
  imgUrl          String         @db.VarChar(255)
  isTradingActive Boolean
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  exchangePairs   ExchangePair[]
}

model ExchangePair {
  exchangeId Int
  coinId     Int
  currencyId Int
  exchange   Exchange @relation(fields: [exchangeId], references: [id])
  coin       Coin     @relation(fields: [coinId], references: [id])
  currency   Currency @relation(fields: [currencyId], references: [coinId])

  @@id([exchangeId, coinId, currencyId])
}

model CoinImage {
  id     Int    @id @default(autoincrement())
  imgUrl String @db.VarChar(255)
}
